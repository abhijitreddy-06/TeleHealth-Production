<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TeleHealth - Virtual Healthcare Solutions</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link href="/css/user_home.css" rel="stylesheet">

</head>

<body>
    
    <header>
        <nav class="navbar">
            <a href="/doc_home" class="logo">
                <i class="fas fa-heartbeat"></i>
                <span class="logo-text">TeleHealth</span>
            </a>

            <div class="nav-links">
                <a href="/doc_home" class="active"><i class="fas fa-home"></i> Home</a>
                <a href="/doc_video_dashboard"><i class="fas fa-video"></i>Video</a>
                <a href="/doc_profile"><i class="fas fa-user-circle"></i> Profile</a>
                <button class="theme-toggle" id="themeToggle">
                    <i class="fas fa-moon"></i>
                </button>
            </div>

            <div class="mobile-controls">
                <button class="theme-toggle" id="mobileThemeToggle">
                    <i class="fas fa-moon"></i>
                </button>
                <button class="mobile-menu-btn" id="mobileMenuBtn">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </nav>
    </header>


    <div class="mobile-menu" id="mobileMenu">
        <button class="close-menu" id="closeMenu">
            <i class="fas fa-times"></i>
        </button>
        <a href="/doc_home" class="active"><i class="fas fa-home"></i> Home</a>
        <a href="/doc_video_dashboard"><i class="fas fa-video"></i>Video</a>
        <a href="/doc_profile"><i class="fas fa-user-circle"></i> Profile</a>

    </div>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <h1>Your <span>Virtual Healthcare</span> Solution</h1>
            <p>Access top healthcare professionals from the comfort of your home. Anytime, anywhere. TeleHealth makes
                healthcare accessible, affordable, and convenient.</p>
            <div class="hero-buttons">
                <a href="/doc_video_dashboard" class="btn btn-outline"><i class="fas fa-video"></i> Video Consultation</a>
            </div>
        </div>
        <div class="hero-image">
            <img src="https://images.unsplash.com/photo-1576091160399-112ba8d25d1d?auto=format&fit=crop&w=600&h=400"
                alt="TeleHealth Virtual Consultation">
        </div>
    </section>

    <!-- Features Section -->
    <section class="features">
        <div class="section-header">
            <h2>Our Healthcare Services</h2>
            <p>Comprehensive virtual healthcare solutions tailored to your needs</p>
        </div>
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-video"></i>
                </div>
                <h3>Virtual Consultations</h3>
                <p>Connect with doctors through secure video calls from anywhere. No travel required, just quality
                    healthcare.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-file-medical"></i>
                </div>
                <h3>Health Vault</h3>
                <p>Securely store and access your medical records, prescriptions, and test results in one place.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-calendar-alt"></i>
                </div>
                <h3>Appointment Dashboard</h3>
                <p>Manage all your appointments in one place. Schedule, reschedule, or cancel with ease.</p>
            </div>
        </div>
    </section>

    <!-- Appointment Section -->
    <section class="appointment">
        <div class="appointment-container">
            <div class="appointment-content">
                <h2>Book an Appointment in 3 Simple Steps</h2>
                <p>Getting the care you need has never been easier. Follow these simple steps to schedule your virtual
                    consultation.</p>

                <div class="steps">
                    <div class="step">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <h3>Choose Your Specialist</h3>
                            <p>Select from our network of board-certified doctors and specialists.</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <h3>Select Date & Time</h3>
                            <p>Pick a convenient time slot that works best for you.</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <h3>Connect Virtually</h3>
                            <p>Join the video consultation at your scheduled time.</p>
                        </div>
                    </div>
                </div>

                <a href="#" class="btn btn-primary"><i class="fas fa-calendar-plus"></i> Schedule Now</a>
            </div>
            <div class="appointment-image">
                <img src="https://images.unsplash.com/photo-1584432810601-6c7f27d2362b?auto=format&fit=crop&w=600&h=400"
                    alt="Appointment Booking">
            </div>
        </div>
    </section>

    <!-- Stats Section -->
    <section class="stats">
        <div class="stats-grid">
            <div class="stat-item">
                <div class="stat-number">25k+</div>
                <div class="stat-text">Patients Served</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">500+</div>
                <div class="stat-text">Healthcare Providers</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">98%</div>
                <div class="stat-text">Patient Satisfaction</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">24/7</div>
                <div class="stat-text">Availability</div>
            </div>
        </div>
    </section>




    <footer class="simple-footer">
        <div class="footer-content">
            <div class="footer-left">
                <a href="/user_home" class="footer-logo">
                    <i class="fas fa-heartbeat"></i>
                    <span>TeleHealth</span>
                    </a>
                    <div class="copyright">
                        Â© 2025 TeleHealth. All rights reserved.
                </div>
            </div>

            <div class="footer-links">
                <a href="/privacy">Privacy Policy</a>
                <span class="separator">|</span>
                <a href="/terms">Terms of Service</a>
                <span class="separator">|</span>
                <a href="/contact">Contact</a>
            </div>
        </div>
    </footer>
<script src="/js/authGuard.js"></script>
<script >/* =========================
API CONFIG
========================= */
    const API_BASE = "https://telehealth-production.onrender.com";

    /* =========================
       AUTH GUARD (DOCTOR ONLY)
    ========================= */
    (async () => {
        try {
            const res = await fetch(`${API_BASE}/api/auth/doctor`, {
                credentials: "include"
            });

            if (!res.ok) {
                window.location.href = "/doc_login";
            }
        } catch {
            window.location.href = "/doc_login";
        }
    })();

    /* =========================
       THEME TOGGLE
    ========================= */
    const themeToggle = document.getElementById("themeToggle");
    const mobileThemeToggle = document.getElementById("mobileThemeToggle");
    const html = document.documentElement;

    const savedTheme =
        localStorage.getItem("theme") ||
        (window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light");

    html.setAttribute("data-theme", savedTheme);
    updateThemeIcon(savedTheme);

    function toggleTheme() {
        const currentTheme = html.getAttribute("data-theme");
        const newTheme = currentTheme === "dark" ? "light" : "dark";
        html.setAttribute("data-theme", newTheme);
        localStorage.setItem("theme", newTheme);
        updateThemeIcon(newTheme);
    }

    function updateThemeIcon(theme) {
        const icon = theme === "dark" ? "fa-sun" : "fa-moon";
        themeToggle.innerHTML = `<i class="fas ${icon}"></i>`;
        mobileThemeToggle.innerHTML = `<i class="fas ${icon}"></i>`;
    }

    themeToggle.addEventListener("click", toggleTheme);
    mobileThemeToggle.addEventListener("click", toggleTheme);

    /* =========================
       MOBILE MENU
    ========================= */
    const mobileMenuBtn = document.getElementById("mobileMenuBtn");
    const closeMenuBtn = document.getElementById("closeMenu");
    const mobileMenu = document.getElementById("mobileMenu");

    mobileMenuBtn.addEventListener("click", (e) => {
        e.stopPropagation();
        mobileMenu.classList.add("active");
        document.body.style.overflow = "hidden";
    });

    closeMenuBtn.addEventListener("click", () => {
        mobileMenu.classList.remove("active");
        document.body.style.overflow = "";
    });

    document.addEventListener("click", (e) => {
        if (
            mobileMenu.classList.contains("active") &&
            !mobileMenu.contains(e.target) &&
            e.target !== mobileMenuBtn
        ) {
            mobileMenu.classList.remove("active");
            document.body.style.overflow = "";
        }
    });

    /* =========================
       LOAD DOCTOR DASHBOARD DATA
    ========================= */
    async function loadDashboard() {
        try {
            const res = await fetch(`${API_BASE}/api/video/doctor/dashboard`, {
                credentials: "include"
            });

            if (!res.ok) {
                return;
            }

            const data = await res.json();
            const appointment = data.appointment;

            const container = document.getElementById("appointmentContainer");

            if (!appointment) {
                container.innerHTML = "<p>No active appointments.</p>";
                return;
            }

            container.innerHTML = `
      <div class="appointment-card">
        <h3>Upcoming Appointment</h3>
        <p><strong>Patient:</strong> ${appointment.user_name}</p>
        <p><strong>Date:</strong> ${appointment.appointment_date}</p>
        <p><strong>Time:</strong> ${appointment.appointment_time}</p>
        <button id="startCallBtn">Start Call</button>
      </div>
    `;

            document
                .getElementById("startCallBtn")
                .addEventListener("click", async () => {
                    const startRes = await fetch(
                        `${API_BASE}/api/appointments/${appointment.id}/start`,
                        {
                            method: "POST",
                            credentials: "include"
                        }
                    );

                    const startData = await startRes.json();
                    if (startRes.ok) {
                        window.location.href = `/doc_video?roomId=${startData.roomId}`;
                    } else {
                        alert(startData.error || "Unable to start call");
                    }
                });

        } catch (err) {
            console.error("Dashboard load error:", err);
        }
    }

    loadDashboard();

    /* =========================
       CHATBOT (OPTIONAL UI)
    ========================= */
    const chatBubble = document.getElementById("chat-bubble");
    const chatbot = document.getElementById("chatbot");

    setTimeout(() => {
        chatBubble.classList.add("active");
    }, 3000);

    chatbot.addEventListener("click", () => {
        alert("Doctor assistant coming soon!");
    });
</script>
</body>

</html>